(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var i=n(1),s=n.n(i),a=n(11),r=n.n(a),u=(n(16),{Easy:{name:"Easy",mines:10,width:9,height:9},Medium:{name:"Medium",mines:40,width:16,height:16},Expert:{name:"Expert",mines:99,width:30,height:16}}),h="\ud83d\ude42",l="\ud83d\udc80",o="\ud83d\ude0e",c=n(8),m=n(2),f=n(3),d=n(6),v=n(4),b=n(10),g=n.n(b),j=n(5),p=g.a.mark(x);function y(e,t){return[e%t,e/t>>0]}function x(e,t,n){var i,s,a,r,u,h,l,o,c;return g.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:i=y(e,t),s=Object(j.a)(i,2),a=s[0],r=s[1],u=0===r?0:r-1,h=a===t-1?a:a+1,l=r===n-1?r:r+1,o=0===a?0:a-1;case 6:if(!(o<=h)){m.next=18;break}c=u;case 8:if(!(c<=l)){m.next=15;break}if(a===o&&r===c){m.next=12;break}return m.next=12,o+c*t;case 12:++c,m.next=8;break;case 15:++o,m.next=6;break;case 18:case"end":return m.stop()}}),p)}var O=n(0),k=function(e){var t=0===e.maxSteps?"":"Steps: ",n=Object(O.jsx)("input",{type:"range",min:"0",max:e.maxSteps,value:e.currentStep,onChange:e.onChange});return Object(O.jsxs)("div",{id:"stepcounter",children:[t,0===e.maxSteps?"":n]})},S=function(e){var t="square",n=e.value,i=Number.isInteger(n)&&n>0&&n<=9;return i&&(t+=" square_number_"+n),(i||""===n||"\ud83d\udca5"===n)&&(t+=" square_revealed"),"\ud83d\udea9\ud83d\udca3"===n&&(n="\ud83d\udea9",t+=" square_bad_flag"),Object(O.jsx)("button",{className:t,onClick:e.onClick,onContextMenu:e.onContextMenu,children:n})},C=function(e){Object(d.a)(n,e);var t=Object(v.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"renderSquare",value:function(e){var t=this;return Object(O.jsx)(S,{value:this.props.guesses[e],onClick:function(n){t.props.onClick(e),n.preventDefault()},onContextMenu:function(n){t.props.onContextMenu(e),n.preventDefault()}},e)}},{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{children:Array.from(Array(this.props.height).keys()).map((function(t){return Object(O.jsx)("div",{className:"board-row",children:Array.from(Array(e.props.width).keys()).map((function(n){return e.renderSquare(n+t*e.props.width)}))},t)}))})}}]),n}(s.a.Component);C.defaultProps={height:u.Easy.height,width:u.Easy.width};var w=C;function N(e){var t=Object(i.useState)(r()),n=Object(j.a)(t,2),s=n[0],a=n[1];function r(){if(void 0===e.startTime&&!e.isRunning)return 0;var t=+new Date-+e.startTime;return Math.min(999,Math.floor(t/1e3))}return Object(i.useEffect)((function(){var t;return e.isRunning&&(t=setTimeout((function(){a(r())}),1e3)),function(){void 0!==t&&clearTimeout(t)}})),Object(O.jsx)("div",{className:e.className,children:s})}N.defaultProps={isRunning:!1,startTime:void 0};var M=N,E=function(e){return Object(O.jsxs)("div",{className:"game-status",children:[Object(O.jsx)("div",{className:"mine-counter status_button",children:e.minesLeft}),Object(O.jsx)("div",{className:"emoji status_button",onClick:e.gameReset,children:e.emoji}),Object(O.jsx)(M,{className:"timer status_button",isRunning:e.timeRunning,startTime:e.startTime})]})};E.defaultProps={minesLeft:0,timeRunning:!1,startTime:void 0};var T=E,A=function(e){var t=[{name:"Easy",level:u.Easy},{name:"Medium",level:u.Medium},{name:"Expert",level:u.Expert}];return Object(O.jsx)("div",{children:t.map((function(t){return Object(O.jsx)("button",{onClick:function(){return e.onChangeLevel(t.level)},children:t.name},t.name)}))})},D=function(e){Object(d.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(m.a)(this,n),(i=t.call(this,e)).init(e.level),i.state=i.makeInitialState(),i}return Object(f.a)(n,[{key:"makeInitialState",value:function(){return{history:[{guesses:Array(this.numCells).fill(null)}],stepNumber:0,numFlags:0,startTime:void 0,gameState:h}}},{key:"init",value:function(e){console.log("init(level = %s)",JSON.stringify(e)),this.level=e,this.width=e.width,this.height=e.height,this.numCells=this.width*this.height,this.numMines=e.mines,console.log("init: %d\xd7%d cells: %d mines: %d",this.width,this.height,this.numCells,this.numMines),console.assert(this.numCells>0)}},{key:"reset",value:function(e){console.log("RESET"),this.init(void 0===e?this.level:e),this.setState(this.makeInitialState())}},{key:"handleClick",value:function(e,t){if(this.state.gameState===h){this.boardDirty=!1;var n=this.state.history.slice(0,this.state.stepNumber+1),i=n[n.length-1].guesses.slice(),s=this.state.gameState;void 0===this.state.startTime&&(this.setState({startTime:new Date}),this.mines=function(e,t,n,i){for(var s=t*n,a=Array(s).fill(0),r=1;r<=e;++r){for(var u=s-r,h=Math.floor(Math.random()*u);h===i||9===a[h];)h=u++;console.assert(9!==a[h]),a[h]=9;for(var l=0,o=Array.from(x(h,t,n));l<o.length;l++){var c=o[l];a[c]=9===a[c]?9:a[c]+1}}return a}(this.numMines,this.width,this.height,e));var a=this.state.numFlags;if(!0===t)"\ud83d\udea9"===i[e]?(i[e]=null,a--,this.boardDirty=!0):null===i[e]&&(i[e]="\ud83d\udea9",a++,this.boardDirty=!0),this.setState({numFlags:a});else if(null===i[e])s=this.revealAt(i,e);else{var r,u=this.mines[e],m=0,f=0,d=Object(c.a)(x(e,this.width,this.height));try{for(d.s();!(r=d.n()).done;){var v=r.value;"\ud83d\udea9"===i[v]?m++:null===i[v]&&f++}}catch(p){d.e(p)}finally{d.f()}if(f>0&&m>=u){var b,g=Object(c.a)(x(e,this.width,this.height));try{for(g.s();!(b=g.n()).done;){var j=b.value;if(null===i[j]&&(s=this.revealAt(i,j))===l)break}}catch(p){g.e(p)}finally{g.f()}}}s===l&&(this.setState({gameState:l}),this.onLoss(i,e)),this.checkWin(i)&&this.setState({gameState:o}),!0===this.boardDirty&&this.setState({history:n.concat([{guesses:i}]),stepNumber:n.length})}}},{key:"checkWin",value:function(e){for(var t=0;t<this.numCells;t++)if(9!==this.mines[t]&&(null===e[t]||"\ud83d\udea9"===e[t]))return!1;return!0}},{key:"onLoss",value:function(e,t){for(var n=0;n<this.numCells;++n)n!==t&&(9===this.mines[n]?null===e[n]&&(e[n]="\ud83d\udca3"):"\ud83d\udea9"===e[n]&&(e[n]="\ud83d\udea9\ud83d\udca3"))}},{key:"revealAt",value:function(e,t){if(null!==e[t])return h;if(9===this.mines[t])return e[t]="\ud83d\udca5",this.boardDirty=!0,l;if(0===this.mines[t]){e[t]="",this.boardDirty=!0;var n,i=Object(c.a)(x(t,this.width,this.height));try{for(i.s();!(n=i.n()).done;){var s=n.value;if(this.revealAt(e,s)===l)return l}}catch(a){i.e(a)}finally{i.f()}}else this.boardDirty=!0,e[t]=this.mines[t];return h}},{key:"render",value:function(){var e=this,t=this.state.history,n=t[this.state.stepNumber];return Object(O.jsxs)("div",{className:"game",children:[Object(O.jsx)(T,{minesLeft:this.numMines-this.state.numFlags,gameReset:function(){return e.reset()},emoji:this.state.gameState,timeRunning:void 0!==this.state.startTime&&this.state.gameState===h,startTime:this.state.startTime}),Object(O.jsx)("div",{className:"game-board",children:Object(O.jsx)(w,{width:this.width,height:this.height,guesses:n.guesses,onClick:function(t){return e.handleClick(t,!1)},onContextMenu:function(t){e.handleClick(t,!0)}})}),Object(O.jsxs)("div",{className:"game-info",children:[Object(O.jsx)(k,{currentStep:this.state.stepNumber,maxSteps:t.length-1,onChange:function(t){return e.setState({stepNumber:t.target.value})}}),Object(O.jsx)(A,{onChangeLevel:function(t){return e.reset(t)}})]})]})}}]),n}(s.a.Component);D.defaultProps={level:u.Easy},r.a.render(Object(O.jsx)(D,{level:u.Easy}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.20538734.chunk.js.map