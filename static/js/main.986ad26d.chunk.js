(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{12:function(e,t,s){"use strict";s.r(t);var n=s(5),i=s.n(n),r=s(11),a=s(3),u=s(6),h=s(7),o=s(9),l=s(8),c=s(1),m=s.n(c),p=s(10),f=s.n(p),v=(s(18),s(0)),d=i.a.mark(S),b="\ud83d\ude42",g="\ud83d\udc80",j="\ud83d\ude0e";function y(e){var t="square",s=e.value,n=Number.isInteger(s)&&s>0&&s<=9;return n&&(t+=" square_number_"+s),(n||""===s||"\ud83d\udca5"===s)&&(t+=" square_revealed"),"\ud83d\udea9\ud83d\udca3"===s&&(s="\ud83d\udea9",t+=" square_bad_flag"),Object(v.jsx)("button",{className:t,onClick:e.onClick,onContextMenu:e.onContextMenu,children:s})}function x(e){var t=0===e.maxSteps?"":"Steps: ",s=Object(v.jsx)("input",{type:"range",min:"0",max:e.maxSteps,value:e.currentStep,onChange:e.onChange});return Object(v.jsxs)("div",{id:"stepcounter",children:[t,0===e.maxSteps?"":s]})}var k=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(){return Object(u.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"renderSquare",value:function(e){var t=this;return Object(v.jsx)(y,{value:this.props.guesses[e],onClick:function(s){t.props.onClick(e),s.preventDefault()},onContextMenu:function(s){t.props.onContextMenu(e),s.preventDefault()}},e)}},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{children:Array.from(Array(this.props.height).keys()).map((function(t){return Object(v.jsx)("div",{className:"board-row",children:Array.from(Array(e.props.width).keys()).map((function(s){return e.renderSquare(s+t*e.props.width)}))},t)}))})}}]),s}(m.a.Component);k.defaultProps={height:3,width:3};var O=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(u.a)(this,s),(n=t.call(this,e)).numCells=e.width*e.height,n.numMines=Math.floor(n.numCells*n.props.mineRatio),console.assert(n.numCells>0),n.initialState={history:[{guesses:Array(n.numCells).fill(null)}],stepNumber:0,numFlags:0,gameState:b},n.state=n.initialState,n}return Object(h.a)(s,[{key:"reset",value:function(){this.setState(this.initialState)}},{key:"handleClick",value:function(e,t){if(this.state.gameState===b){this.stateDirty=!1;var s=this.state.history.slice(0,this.state.stepNumber+1),n=s[s.length-1].guesses.slice(),i=this.state.gameState;0===this.state.stepNumber&&(this.mines=function(e,t,s,n){for(var i=t*s,r=Array(i).fill(0),a=1;a<=e;++a){for(var u=i-a,h=Math.floor(Math.random()*u);h===n||9===r[h];)h=u++;console.assert(9!==r[h]),r[h]=9;for(var o=0,l=Array.from(S(h,t,s));o<l.length;o++){var c=l[o];r[c]=9===r[c]?9:r[c]+1}}return r}(this.numMines,this.props.width,this.props.height,e));var r=this.state.numFlags;if(!0===t)"\ud83d\udea9"===n[e]?(n[e]=null,r--,this.stateDirty=!0):null===n[e]&&(n[e]="\ud83d\udea9",r++,this.stateDirty=!0),this.setState({numFlags:r});else if(null===n[e])i=this.revealAt(n,e);else{var u,h=this.mines[e],o=0,l=0,c=Object(a.a)(S(e,this.props.width,this.props.height));try{for(c.s();!(u=c.n()).done;){var m=u.value;"\ud83d\udea9"===n[m]?o++:null===n[m]&&l++}}catch(d){c.e(d)}finally{c.f()}if(l>0&&o>=h){var p,f=Object(a.a)(S(e,this.props.width,this.props.height));try{for(f.s();!(p=f.n()).done;){var v=p.value;if(null===n[v]&&(i=this.revealAt(n,v))===g)break}}catch(d){f.e(d)}finally{f.f()}}}i===g&&(this.setState({gameState:g}),this.onLoss(n,e)),this.checkWin(n)&&this.setState({gameState:j}),!0===this.stateDirty&&this.setState({history:s.concat([{guesses:n}]),stepNumber:s.length})}}},{key:"checkWin",value:function(e){for(var t=0;t<this.numCells;t++)if(9!==this.mines[t]&&(null===e[t]||"\ud83d\udea9"===e[t]))return!1;return!0}},{key:"onLoss",value:function(e,t){for(var s=0;s<this.numCells;++s)s!==t&&(9===this.mines[s]?null===e[s]&&(e[s]="\ud83d\udca3"):"\ud83d\udea9"===e[s]&&(e[s]="\ud83d\udea9\ud83d\udca3"))}},{key:"revealAt",value:function(e,t){if(null!==e[t])return b;if(9===this.mines[t])return e[t]="\ud83d\udca5",this.stateDirty=!0,g;if(0===this.mines[t]){e[t]="",this.stateDirty=!0;var s,n=Object(a.a)(S(t,this.props.width,this.props.height));try{for(n.s();!(s=n.n()).done;){var i=s.value;if(this.revealAt(e,i)===g)return g}}catch(r){n.e(r)}finally{n.f()}}else this.stateDirty=!0,e[t]=this.mines[t];return b}},{key:"render",value:function(){var e=this,t=this.state.history,s=t[this.state.stepNumber],n=Object(v.jsx)(x,{currentStep:this.state.stepNumber,maxSteps:t.length-1,onChange:function(t){return e.setState({stepNumber:t.target.value})}});return Object(v.jsxs)("div",{className:"game",children:[Object(v.jsxs)("div",{className:"game-status",children:[Object(v.jsx)("div",{className:"mine-counter status_button",children:this.numMines-this.state.numFlags}),Object(v.jsx)("div",{className:"emoji status_button",onClick:function(){return e.reset()},children:this.state.gameState})]}),Object(v.jsx)("div",{className:"game-board",children:Object(v.jsx)(k,{width:this.props.width,height:this.props.height,guesses:s.guesses,onClick:function(t){return e.handleClick(t,!1)},onContextMenu:function(t){e.handleClick(t,!0)}})}),Object(v.jsx)("div",{className:"game-info",children:n})]})}}]),s}(m.a.Component);function C(e,t){return[e%t,e/t>>0]}function S(e,t,s){var n,a,u,h,o,l,c,m,p;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=C(e,t),a=Object(r.a)(n,2),u=a[0],h=a[1],o=0===h?0:h-1,l=u===t-1?u:u+1,c=h===s-1?h:h+1,m=0===u?0:u-1;case 6:if(!(m<=l)){i.next=18;break}p=o;case 8:if(!(p<=c)){i.next=15;break}if(u===m&&h===p){i.next=12;break}return i.next=12,m+p*t;case 12:++p,i.next=8;break;case 15:++m,i.next=6;break;case 18:case"end":return i.stop()}}),d)}O.defaultProps={height:3,width:3,mineRatio:.15},f.a.render(Object(v.jsx)(O,{width:10,height:10,settings:[{name:"Easy",mines:10,size:[9,9]},{name:"Medium",mines:40,size:[16,16]},{name:"Expert",mines:99,size:[30,16]}].Easy}),document.getElementById("root"))},18:function(e,t,s){}},[[12,1,2]]]);
//# sourceMappingURL=main.986ad26d.chunk.js.map